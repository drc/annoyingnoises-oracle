---
const { sound } = Astro.props;
const host = "https://assets.explosivejuice.com/";
---

<span>{sound.key.replace("dota/", "")}</span>
<button class="play-button" data-src={host + sound.key}> Play </button>

<script>
    const buttons = document.querySelectorAll(".play-button");
    const audio = new Audio();

    buttons.forEach((button) => {
        button.addEventListener("click", () => {
            const src = button.getAttribute("data-src");
            if (src) {
                audio.src = src;
                audio.play().catch((e) => console.error("Error playing sound:", e));
            }
        });
    });
</script>

<style>
    .play-button {
        background: #661100; /* dota-dark-red fallback */
        background: var(--dota-dark-red);
        border: 1px solid rgba(194, 169, 112, 0.3); /* dota-border fallback */
        border: var(--dota-border);
        color: #c2a970; /* dota-gold fallback */
        color: var(--dota-gold);
        padding: 0.4rem 0.8rem;
        cursor: pointer;
        font-family: inherit;
        font-size: 0.9rem;
        border-radius: 2px;
        transition: all 0.2s;
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    .play-button:hover {
        background: #bb3322; /* dota-red fallback */
        background: var(--dota-red);
        box-shadow: 0 0 10px rgba(187, 51, 34, 0.3);
    }

    .play-button:active {
        transform: translateY(1px);
    }
</style>
